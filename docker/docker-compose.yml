#write dockerfile for php
version: '3.5'


services:
    app-php:
        container_name: app-php
        build:
            context: ../
            dockerfile: docker/php/Dockerfile
        image: php-blackjack:php-blackjack
        volumes:
            - ../:/app
        env_file:
            - docker-compose.env
    nginx:
        container_name: app-nginx
        build:
            context: ../
            dockerfile: docker/nginx/Dockerfile
        volumes:
            - ../:/var/www/html
            - ./nginx/nginx.conf:/etc/nginx/nginx.conf
        ports:
            - "669:80"
    mysqlcasino:
        container_name: mysqlcasino
        image: mysql:5.7
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_ROOT_HOST: "%"
            MYSQL_DATABASE: casino
            MYSQL_USER: user
            MYSQL_PASSWORD: user
        ports:
            - "1400:3306"
        volumes:
            - mysqlcasino_data:/var/lib/mysql


volumes:
    mysqlcasino_data:
